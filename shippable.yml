language: node_js
node_js:
  - "node"

build:
  cache: true
  cache_dir_list:
    - $SHIPPABLE_BUILD_DIR/node_modules
  ci:
    - npm update -g npm
    - java -version
    - ls -l /tmp/ssh/
    - echo $BRANCH
    - ssh-agent bash -c 'ssh-add /tmp/ssh/githubdeploy; git clone -b gh-pages git@github.com:yumetodo/Hatena-Blog-Themes.git /dev/shm/Hatena-Blog-Themes'
    - bash -c 'cd /dev/shm/Hatena-Blog-Themes; git status;'
    - npm install --unsafe-perm
    - npm run lint
    - npm run build

notifications:
  email:
    on_success: change
    on_failure: always

integrations:
  key:
    - integrationName: githubdeploy
      type: ssh-key
